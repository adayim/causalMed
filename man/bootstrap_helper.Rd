% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bootstrap_helper.r
\name{bootstrap_helper}
\alias{bootstrap_helper}
\title{Calculate mediation analysis confidence interval}
\usage{
bootstrap_helper(
  data,
  id_var,
  base_vars,
  time_var,
  exposure,
  models,
  intervention,
  init_recode = NULL,
  in_recode = NULL,
  out_recode = NULL,
  mc_sample = 10000,
  mediation_type = c(NA, "N", "I"),
  R = 500,
  progress_bar = TRUE,
  future_seed = TRUE
)
}
\arguments{
\item{data}{A \code{data.frame} (long format): one row per \code{id_var} per \code{time_var}.}

\item{id_var}{Character scalar. Subject identifier column name.}

\item{base_vars}{Character vector of time-fixed baseline covariates (may be empty).}

\item{time_var}{Character scalar. Time variable column name (ordered; integer/numeric).}

\item{exposure}{Character scalar. Exposure variable to intervene on (must be in \code{data}).}

\item{models}{A list of model specifications evaluated in temporal order. The order
appeared in the list should reflect the temporal ordering of the variables, in another
way data generation process. See \code{\link{spec_model}} for a recommended constructor.}

\item{intervention}{A named list specifying exposure interventions. Each
element is either \code{NULL} (the natural course) or a numeric/logical
vector whose length equals the number of unique time points in
\code{time_var}. For example,
\code{list(natural = NULL, always = c(1, 1, 1), never = c(0, 0, 0))}.
If \code{intervention} is \code{NULL}, only the natural course is
evaluated. If a \code{natural} arm is not provided, it is added
automatically and \code{ref_int} is set to \code{"natural"}.}

\item{init_recode}{Optional expression/function applied once at time 0 before the Monte Carlo loop
(e.g., initializing baseline-derived variables). Should be defined with \code{\link{recodes}}. See Details.}

\item{in_recode}{Optional expression/function applied at the **start** of each time step
(e.g., entry-time functional forms). Should be defined with \code{\link{recodes}}. See Details.}

\item{out_recode}{Optional expression/function applied at the **end** of each time step
(e.g., create lags, cumulative counts). Should be defined with \code{\link{recodes}}. See Details.}

\item{mc_sample}{Integer. Monte Carlo sample size used for simulation.
Default \code{nrow(data) * 100}.}

\item{R}{Number of bootstrap replicates. If \code{R > 1},
computation uses \code{future.apply::future_lapply} and runs sequentially
unless a parallel plan is set; see \code{future::plan}. Use
\code{plan(multisession)} on Windows and \code{plan(multicore)} on
Unix-alikes to enable parallel bootstrap. Default \code{500}.}
}
\description{
Used to calculate confidence interval using non-parametric bootstrap methods.
}
\keyword{internal}
